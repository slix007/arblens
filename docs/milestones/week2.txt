Week 2 ‚Äî –ü–ª–∞–Ω –ø–æ —Ç–∞–π–º–±–æ–∫—Å–∞–º

‚∏ª

0:00‚Äì1:00 (1—á) ‚Äî –ö–æ–Ω—Ç—Ä–∞–∫—Ç –º–µ—Ç—Ä–∏–∫ (—Ç—ã)

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π task:
docs/tasks/020-spread-and-slippage.md
–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å:

–¢–µ—Ä–º–∏–Ω—ã
	‚Ä¢	firstSell, secondBuy
	‚Ä¢	spreadSell = firstSell - secondBuy
	‚Ä¢	spreadBuy = secondSell - firstBuy

–ù–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
	‚Ä¢	gross_spread
	‚Ä¢	effective_price_for_size
	‚Ä¢	net_spread
	‚Ä¢	capacity

–î–æ–ø—É—â–µ–Ω–∏—è
	‚Ä¢	taker fees only
	‚Ä¢	no transfer delay
	‚Ä¢	no funding impact
	‚Ä¢	no partial execution logic

üëâ –≠—Ç–æ –≤–∞–∂–Ω—ã–π Staff-–º–æ–º–µ–Ω—Ç:
–º–µ—Ç—Ä–∏–∫–∏ = –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

‚∏ª

1:00‚Äì2:00 (1—á) ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (—Ç—ã)

–°–µ–π—á–∞—Å spread —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤ CLI. –≠—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.

–°–æ–∑–¥–∞—Ç—å:
analytics/
    spread.py
    slippage.py

–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏:
	‚Ä¢	spread-–ª–æ–≥–∏–∫—É
	‚Ä¢	best price extraction

CLI –¥–æ–ª–∂–µ–Ω:
	‚Ä¢	–≤—ã–∑—ã–≤–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É
	‚Ä¢	–Ω–µ —Å—á–∏—Ç–∞—Ç—å –Ω–∏—á–µ–≥–æ —Å–∞–º

‚∏ª

2:00‚Äì4:00 (2—á) ‚Äî Slippage model (AI + —Ç—ã)

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ slippage.py

–§—É–Ω–∫—Ü–∏—è:
def effective_price(levels: Sequence[OrderBookLevel], size: float) -> float
–õ–æ–≥–∏–∫–∞:
	‚Ä¢	walk the book
	‚Ä¢	accumulate size
	‚Ä¢	weighted average price
	‚Ä¢	–µ—Å–ª–∏ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç ‚Üí –æ—à–∏–±–∫–∞ –∏–ª–∏ partial flag (–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ)

–≠—Ç–æ —É–∂–µ —Ä–µ–∞–ª—å–Ω—ã–π infra-thinking.

‚∏ª

4:00‚Äì5:00 (1—á) ‚Äî Fees model

–°–æ–∑–¥–∞—Ç—å:
analytics/fees.py
–ü—Ä–æ—Å—Ç–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç:
@dataclass
class FeeSchedule:
    taker: float  # e.g. 0.001 = 0.1%
–§—É–Ω–∫—Ü–∏—è:
    def apply_fee(price: float, fee: float, side: Literal["buy", "sell"]) -> float

–î–æ–ø—É—â–µ–Ω–∏–µ:
	‚Ä¢	fee applied multiplicatively
	‚Ä¢	buy ‚Üí price * (1 + fee)
	‚Ä¢	sell ‚Üí price * (1 - fee)

‚∏ª

5:00‚Äì6:00 (1—á) ‚Äî Net spread calculation

–í analytics/spread.py:
def compute_net_spread(
    first_book: OrderBook,
    second_book: OrderBook,
    size: float,
    first_fee: float,
    second_fee: float,
) -> SpreadResult:
–ì–¥–µ SpreadResult ‚Äî dataclass:
@dataclass
class SpreadResult:
    gross_spread: float
    net_spread: float
    capacity: float

CLI —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–µ–Ω –ø–µ—á–∞—Ç–∞—Ç—å:
gross_spread: ...
net_spread: ...
capacity: ...

6:00‚Äì7:00 (1—á) ‚Äî –¢–µ—Å—Ç—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (–≤–∞–∂–Ω–æ)

–î–æ–±–∞–≤–∏—Ç—å unit tests:
	‚Ä¢	slippage weighted average correct
	‚Ä¢	insufficient liquidity
	‚Ä¢	fee applied correctly
	‚Ä¢	net spread decreases after fees

–≠—Ç–æ —É–∂–µ —á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Üí –∏–¥–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã.

‚∏ª

7:00‚Äì8:00 (1—á) ‚Äî Product polish

–û–±–Ω–æ–≤–∏—Ç—å:
	‚Ä¢	README ‚Äî –¥–æ–±–∞–≤–∏—Ç—å ‚Äúnet spread example‚Äù
	‚Ä¢	Task 020 ‚Üí —Å—Ç–∞—Ç—É—Å
	‚Ä¢	–í–æ–∑–º–æ–∂–Ω–æ ADR:
	docs/decisions/0002-fees-and-slippage-model.md

–ö–æ—Ä–æ—Ç–∫–∏–π:
	‚Ä¢	taker-only
	‚Ä¢	no funding
	‚Ä¢	no transfer latency

‚∏ª

üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å Week 2

CLI —Ç–µ–ø–µ—Ä—å:
uv run python -m arblens.cli.main report --size 1000
gross_spread
net_spread (after fees)
capacity

–¢—ã –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—à—å bid/ask.
–¢—ã –¥–µ–ª–∞–µ—à—å realistic arbitrage feasibility check.